name: Example Usage

on:
  workflow_dispatch:

permissions:
  contents: read

jobs:
  example:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@34e114876b0b11c390a56381ad16ebd13914f8d5 # v4.3.1

      - name: Fetch Trakt data
        id: trakt
        uses: ./
        with:
          trakt_client_id: ${{ secrets.TRAKT_CLIENT_ID }}
          trakt_username: gvns
          tmdb_api_key: ${{ secrets.TMDB_API_KEY }}
          output_path: test-output/watching.json
          history_limit: '10'

      - name: Show results
        if: always()
        shell: bash
        env:
          POSTERS_STATUS: ${{ steps.trakt.outputs.posters_status }}
        run: |
          echo "posters_status: ${POSTERS_STATUS}"
          if [ -f test-output/watching.json ]; then
            echo "--- Output JSON ---"
            jq . test-output/watching.json
          else
            echo "::warning::Output file not found"
          fi
